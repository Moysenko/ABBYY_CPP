## Решение
Поставим в соответствие каждой клетке с единицей вершину. Соединим соседние по стороне клетки ребром. Тогда, очевидно, ответ - количество компонент связности

Решение работает за $O(N * M)$